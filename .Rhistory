geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5)
startlists %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_sprint_points, y = pcs_sprint_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_sprint_points, y = pcs_sprint_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_wrap(year~event_id)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_wrap(event_date~event_id)
startlists_favorites %>%
filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(event_date~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(event_date~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_gc_points, y = pcs_gc_points_season, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point() +
scale_x_sqrt() +
scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point(alpha = 0.6) +
scale_x_sqrt() +
scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = rev(factor(tier)))) +
geom_point(alpha = 0.6) +
scale_x_sqrt() +
scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point(alpha = 0.6) +
scale_x_sqrt() +
scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier, levels = c(3:0)))) +
geom_point(alpha = 0.6) +
scale_x_sqrt() +
scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point(alpha = 0.6) +
scale_x_sqrt() +
scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point(alpha = 0.6) +
# scale_x_sqrt() +
# scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
startlists_favorites %>%
# filter(year(event_date) == 2025 & event_id == "vuelta-a-espana") %>%
left_join(df_favs %>% select(event_id, event_date, rider_id, tier)) %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_last_60d, colour = factor(tier))) +
geom_point(alpha = 0.6) +
scale_x_sqrt() +
# scale_y_sqrt() +
ggrepel::geom_text_repel(aes(label = rider_name), size = 2.5) +
facet_grid(year(event_date)~event_id)
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, y = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), fill = count)) +
geom_tile() +
scale_fill_viridis_c() +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, colour = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), fill = count)) +
geom_line() +
scale_fill_viridis_c() +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, colour = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), y = count)) +
geom_line() +
scale_fill_viridis_c() +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, colour = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), y = count)) +
geom_line() +
scale_color_viridis_d(name = "") +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, colour = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), y = count)) +
geom_line() +
scale_color_discrete(name = "") +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, colour = event_id, y = count)) +
geom_line() +
scale_color_discrete(name = "") +
facet_grid(year~factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth")))) +
labs(x = "stage", y = NULL)
startlists_favorites
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_season_w))
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = pcs_points_season_w)) +
geom_point(alpha = 0.5)
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = combined_score)) +
geom_point(alpha = 0.5)
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = combined_score)) +
geom_point(alpha = 0.25)
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = combined_score)) +
geom_point(alpha = 0.25) +
facet_wrap(~event_id)
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = combined_score)) +
geom_point(alpha = 0.25) +
facet_wrap(~event_id, scales = "free_x")
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = combined_score, colour = year(event_date))) +
geom_point(alpha = 0.25) +
facet_wrap(~event_id, scales = "free_x")
startlists_favorites %>%
ggplot(aes(x = pcs_points_season, y = combined_score, colour = factor(year(event_date)))) +
geom_point(alpha = 0.25) +
facet_wrap(~event_id, scales = "free_x")
Sys.getenv("DB_NAME")
Sys.getenv("DB_HOST")
plan(sequential)
plan(multisession, workers = 2)
source("~/Projects/Personal/tourmanager/scraper/R/compute_scores.R", echo=TRUE)
View(participant_stage_points)
View(stage_scores_long)
source("~/Projects/Personal/tourmanager/scraper/R/compute_scores.R", echo=TRUE)
results_test <- map_df(list.files("../data/processed/results", full.names = T), ~read.csv(.x, encoding = "UTF-8"))
source("~/Projects/Personal/tourmanager/scraper/R/compute_scores.R", echo=TRUE)
View(stage_scores_long)
View(rider_scores)
install.packages(c("blastula", "keyring", "glue"))
library(blastula)
install.packages(c("blastula", "keyring", "glue"))
create_smtp_creds_key(
id    = "hotmail",                 # zelf te kiezen naam
user  = "thomas.014@hotmail.com",  # jouw afzenderadres
host  = "smtp.hotmail.com",
port  = 465,                     # SSL-poort
use_ssl = TRUE
)
install.packages(c("blastula", "keyring", "glue"))
library(blastula)
install.packages(c("blastula", "keyring", "glue"))
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
install.packages("htmltools")
install.packages("htmltools")
install.packages("htmltools")
install.packages("htmltools")
install.packages("htmltools")
install.packages("htmltools")
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
library(keyring)
library(glue)
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
update.packages("htmltools")
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
install.packages("htmltools")
# install.packages(c("blastula", "keyring", "glue"))
library(blastula)
selections <- map_df(list.files("../data/processed/selections", full.names = T), ~read.csv(.x, encoding = "UTF-8"))
library(tidyverse)
library(ggplot2)
library(lubridate)
selections <- map_df(list.files("../data/processed/selections", full.names = T), ~read.csv(.x, encoding = "UTF-8"))
selections
selections <- read.csv("../data/processed/selections/selections_vuelta-a-espana-2025.csv")
selections <- read.csv("../data/processed/selections/selections_vuelta-a-espana-2025.csv")
selections <- read.csv("../data/processed/selections/selections_vuelta-a-espana_2025.csv")
selections
selections
selections %>%
ggplot(aes(x = rider_name, y = glue("{voornaam} {achternaam}")))
selections %>%
ggplot(aes(x = rider_name, y = glue::glue("{voornaam} {achternaam}")))
selections %>%
ggplot(aes(x = rider_name, y = glue::glue("{voornaam} {achternaam}"))) +
geom_tile()
selections %>%
ggplot(aes(x = rider_name, y = glue::glue("{voornaam} {achternaam}"))) +
geom_point()
selections %>%
ggplot(aes(x = rider_name, y = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white")
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(x = rider_name, y = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white")
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white")
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal()
selections %>%
# filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal()
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal()
selections %>%
filter(voornaam %in% c("Justine","Christoph", "Chad", "Thomas")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal()
selections %>%
filter(voornaam %in% c("Justine","Christoph", "Chad") | achternaam == "Segers") %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal()
selections %>%
filter(voornaam %in% c("Justine","Christoph", "Chad") | achternaam == "Segers") %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
selections %>%
filter(voornaam %in% c("Chad") | achternaam == "Segers") %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam} {achternaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
selections %>%
filter(voornaam %in% c("Justine","Christoph")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
selections %>%
filter(achternaam %in% c("Segers","Verstraeten")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
selections %>%
filter(achternaam %in% c("Segers","Verstraeten")) %>%
ggplot(aes(y = rider_name, x = glue::glue("{voornaam}"))) +
geom_tile(color = "white") +
coord_equal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(x = NULL, y = NULL)
results_test <- map_df(list.files("../data/processed/results", full.names = T), ~read.csv(.x, encoding = "UTF-8"))
results_test
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, y = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), fill = count)) +
geom_tile() +
scale_fill_viridis_c() +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test <- map_df(list.files("../data/processed/results", full.names = T), ~read.csv(.x, encoding = "UTF-8"))
results_test
results_test %>%
mutate(stage_nr = as.numeric(gsub(".*stage-", "", stage_id))) %>%
arrange(stage_nr) %>%
group_by(event_id, year, stage_nr, category) %>%
summarise(count = n()) %>%
ggplot(aes(x = stage_nr, y = factor(category, levels = rev(c("stage", "gc", "points", "kom", "youth"))), fill = count)) +
geom_tile() +
scale_fill_viridis_c() +
facet_grid(year~event_id) +
labs(x = "stage", y = NULL)
results_test
results_test %>%
filter(event_id == "vuelta-a-espana" & year == 2025)
rider_points <- read.csv("data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
startlist <- read.csv("../data/processed/startlists_favorites/startlist_vuelta-a-espana_2025.csv")
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
startlist <- read.csv("../data/processed/startlists_favorites/startlist_vuelta-a-espana_2025.csv")
rider_points
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
startlist <- read.csv("../data/processed/startlists_favorites/startlist_vuelta-a-espana_2025.csv")
rider_points %>%
group_by(rider_id, rider_name) %>%
summarise(points = sum(stage_points)) %>%
ungroup() %>%
arrange(-points)
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
startlist <- read.csv("../data/processed/startlists_favorites/startlist_vuelta-a-espana_2025.csv")
rider_points %>%
group_by(rider_id, rider_name) %>%
summarise(points = sum(stage_points)) %>%
ungroup() %>%
arrange(-points) %>%
left_join(startlist %>% select(rider_id, fav_points))
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
startlist <- read.csv("../data/processed/startlists_favorites/startlist_vuelta-a-espana_2025.csv")
rider_points %>%
group_by(rider_id, rider_name) %>%
summarise(points = sum(stage_points)) %>%
ungroup() %>%
arrange(-points) %>%
left_join(startlist %>% select(rider_id, fav_points)) %>%
filter(fav_points == 1)
rider_points <- read.csv("../data/processed/points/rider_stage_summary_vuelta-a-espana_2025.csv")
startlist <- read.csv("../data/processed/startlists_favorites/startlist_vuelta-a-espana_2025.csv")
rider_points %>%
group_by(rider_id, rider_name) %>%
summarise(points = sum(stage_points)) %>%
ungroup() %>%
arrange(-points) %>%
left_join(startlist %>% select(rider_id, fav_points))
source("~/Projects/Personal/tourmanager/scraper/scripts/compute_scores.R", echo=TRUE)
View(stage_results)
stage_results <- results %>%
filter(category == "stage") %>%
mutate(rank = as.integer(rank)) %>%
filter(rank <= 10) %>%
# Voeg een kolom toe die aangeeft of het een TTT is
left_join(
stages %>% select(stage_id, stage_name),
by = "stage_id"
) %>%
mutate(
is_ttt = grepl("TTT)", stage_name)
)
View(stage_results)
stage_results <- results %>%
filter(category == "stage") %>%
mutate(rank = as.integer(rank)) %>%
filter(rank <= 10) %>%
# Voeg een kolom toe die aangeeft of het een TTT is
left_join(
stages %>% select(stage_id, stage_name),
by = "stage_id"
) %>%
mutate(
is_ttt = grepl("TTT)", stage_name)
) %>%
# kies het juiste puntenschema
rowwise() %>%
mutate(
points = ifelse(is_ttt,
stage_points_ttt$points[match(rank, stage_points_ttt$rank)],
stage_points$points[match(rank, stage_points$rank)])
) %>%
ungroup()
source("~/Projects/Personal/tourmanager/scraper/scripts/compute_scores.R", echo=TRUE)
View(daily_class_results)
View(final_class_results)
View(rider_scores)
View(participant_stage_ranked)
View(all_participant_stage_scores)
View(final_scores_long)
View(all_participant_stage_scores)
View(stage_all_points)
View(stage_scores_long)
View(all_participant_stage_scores)
View(participant_stage_points)
stage_scores_long
View(stage_scores_long)
